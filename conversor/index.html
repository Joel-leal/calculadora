<html>
  <head>
    <title>Conversor de medidas</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <!-- <input type="text" />
    <select class="form-select" id="select01"></select>
    <input type="text" />
    <select class="form-select" id="select02"></select> -->

    <div class="input-group mb-3 w-50 p-3">
      <input
        type="number"
        class="form-control w-75 p-3"
        aria-label="Text input with dropdown button"
        min="0"
        onkeyup="handleChange()"
        id="input"
      />
      <selects
        class="form-select"
        onchange="handleChange()"
        id="select-input"
      ></selects>
    </div>
    <div class="input-group mb-3 w-50 p-3">
      <input
        type="number"
        class="form-control w-75 p-3"
        aria-label="Text input with dropdown button"
        min="0"
        id="output"
        disabled
      />
      <select
        class="form-select"
        onchange="handleChange()"
        id="select-output"
      ></select>
    </div>
  </body>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/decimal.js/9.0.0/decimal.min.js"
    integrity="sha512-zPQm8HS4Phjo9pUbbk+HPH3rSWu5H03NFvBpPf6D9EU2xasj0ZxhYAc/lvv/HVDWMSE1Autj19i6nZOfiVQbFQ=="
    crossorigin="anonymous"
  ></script>
  <script type="text/javascript">
    const listaMedidas = [
      { text: "km", value: 0.1 },
      { text: "hm", value: 0.01 },
      { text: "dam", value: 0.001 },
      { text: "m", value: 0.0001 },
      { text: "dm", value: 0.00001 },
      { text: "cm", value: 0.000001 },
      { text: "mm", value: 0.0000001 },
    ];
    const selectElements = Array.from(
      document.getElementsByClassName("form-select")
    ); //Array.from pega os elementos como de uma lista
    listaMedidas.map((item) => {
      console.log(item);
      // selectElements.innerHTML += `<option value="1">${item}</option>`;
      selectElements.map((element) => {
        element.innerHTML += `<option value="${item.value}">${item.text}</option>`;
      });
    });
    function handleChange() {
      let outputElement = document.getElementById("output");
      let inputValue = new Decimal(
        document.getElementById("input").value.replace(",", ".")
      );
      let selectInput = new Decimal(
        document.getElementById("select-input").value
      );
      let selectOutput = new Decimal(
        document.getElementById("select-output").value
      );
      console.log(selectInput, selectOutput, inputValue);

      let result = inputValue.times(selectInput.div(selectOutput));
      outputElement.value = result;
    }
  </script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
    crossorigin="anonymous"
  ></script>
</html>
